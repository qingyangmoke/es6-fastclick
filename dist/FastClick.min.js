/*!
 * es6-fastclick
 * Description: es6-fastclick
 * Author: 清扬陌客
 * Version: v0.1.2
 * Github: https://github.com/qingyangmoke/es6-fastclick.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FastClick=t():e.FastClick=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/Users/songfusheng/github/es6-fastclick/dist",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=n(2),r=o(i);e.exports=r.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=navigator.userAgent,r=i.indexOf("Windows Phone")>=0,a=i.indexOf("Android")>0&&!r,c=/iP(ad|hone|od)/.test(i)&&!r,s=c&&/OS 4_\d(_\d)?/.test(i),u=c&&/OS [6-7]_\d/.test(i),l=i.indexOf("BB10")>0,d=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,t)}catch(t){e=!1}return e}(),h=!!d&&{passive:!1};if(Date.now=Date.now||function(){return+new Date},window.performance=window.performance||{},"function"!=typeof window.performance.now){var f=Date.now();window.performance.now=function(){return Date.now()-f}}var v=function(){function e(t){function o(e,t){return function(){return e.apply(t,arguments)}}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.layer=t,this.options=i;var r;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var c=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,u=0,l=c.length;u<l;u++)s[c[u]]=o(s[c[u]],s);a&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,h),t.addEventListener("touchmove",this.onTouchMove,h),t.addEventListener("touchend",this.onTouchEnd,h),t.addEventListener("touchcancel",this.onTouchCancel,h),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,o){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,o):i.call(t,e,n,o)},t.addEventListener=function(e,n,o){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),o):i.call(t,e,n,o)}),"function"==typeof t.onclick&&(r=t.onclick,t.addEventListener("click",function(e){r(e)},!1),t.onclick=null)}}return o(e,[{key:"needsClick",value:function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(c&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)}},{key:"needsFocus",value:function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}}},{key:"sendClick",value:function(e,t){var n=void 0,o=void 0;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,n.fromFastClick=!0,e.dispatchEvent(n)}},{key:"determineEventType",value:function(e){return a&&"select"===e.tagName.toLowerCase()?"mousedown":"click"}},{key:"focus",value:function(e){var t=void 0;c&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type&&"number"!==e.type?(t=e.value.length,e.setSelectionRange(t,t),e.focus()):e.focus()}},{key:"updateScrollParent",value:function(e){var t=void 0,n=void 0;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)}},{key:"getTargetElementFromEventTarget",value:function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e}},{key:"onTouchStart",value:function(e){var t=void 0,n=void 0,o=void 0,i=this._getTimeStamp(e);if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],c){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!s){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=i,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,i-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0}},{key:"touchHasMoved",value:function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n}},{key:"onTouchMove",value:function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)}},{key:"findControl",value:function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")}},{key:"onTouchEnd",value:function(e){var t=void 0,n=void 0,o=void 0,i=void 0,r=void 0,l=this.targetElement,d=this._getTimeStamp(e);if(!this.trackingClick)return!0;if(d-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(d-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=d,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,u&&(r=e.changedTouches[0],l=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),o=l.tagName.toLowerCase(),"label"===o){if(t=this.findControl(l)){if(this.focus(l),a)return!1;l=t}}else if(this.needsFocus(l))return d-n>100||c&&window.top!==window&&"input"===o?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,e),c&&"select"===o||(this.targetElement=null,e.preventDefault()),!1);return!(!c||s||(i=l.fastClickScrollParent,!i||i.fastClickLastScrollTop===i.scrollTop))||(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)}},{key:"onTouchCancel",value:function(){this.trackingClick=!1,this.targetElement=null}},{key:"onMouse",value:function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))}},{key:"onClick",value:function(e){var t=void 0;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)}},{key:"destroy",value:function(){var e=this.layer;a&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,h),e.removeEventListener("touchmove",this.onTouchMove,h),e.removeEventListener("touchend",this.onTouchEnd,h),e.removeEventListener("touchcancel",this.onTouchCancel,h)}},{key:"_getTimeStamp",value:function(e){return performance.now()}}],[{key:"notNeeded",value:function(e){var t=void 0,n=void 0,o=void 0,i=void 0;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(l&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(i=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(i>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))}},{key:"attach",value:function(t,n){return new e(t,n)}}]),e}();t.default=v}])});